<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Vacations</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üèñÔ∏è Vacation Countdown</h1>
            <nav>
                <a href="{{ url_for('index') }}">Home</a>
                <a href="{{ url_for('add') }}">Add Vacation</a>
                <a href="{{ url_for('list_vacations') }}" class="active">All Vacations</a>
            </nav>
        </header>

        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <main>
            <div class="list-header">
                <h2>All Vacations</h2>
                <a href="{{ url_for('add') }}" class="btn btn-primary">Add New Vacation</a>
            </div>

            {% if vacation_data %}
                <div class="vacation-list">
                    {% for item in vacation_data %}
                        <div class="vacation-item {% if item.vacation.is_active %}active{% endif %}">
                            <div class="vacation-info">
                                <h3>{{ item.vacation.location }}</h3>
                                <p class="date">{{ item.vacation.start_date|format_date }}</p>
                                
                                {% if item.days_remaining is not none %}
                                    {% if item.days_remaining > 0 %}
                                        <p class="days-info">{{ item.days_remaining }} day{% if item.days_remaining != 1 %}s{% endif %} away</p>
                                    {% elif item.days_remaining == 0 %}
                                        <p class="days-info today">Today!</p>
                                    {% else %}
                                        <p class="days-info passed">Passed</p>
                                    {% endif %}
                                {% endif %}
                                
                                {% if item.vacation.notes %}
                                    <p class="notes-preview">{{ item.vacation.notes[:100] }}{% if item.vacation.notes|length > 100 %}...{% endif %}</p>
                                {% endif %}
                                
                                {% if item.vacation.is_active %}
                                    <span class="badge active-badge">Active</span>
                                {% endif %}
                            </div>
                            
                            <div class="vacation-actions">
                                <a href="{{ url_for('edit_notes', vacation_id=item.vacation.id) }}" class="btn btn-small">Edit Notes</a>
                                
                                {% if not item.vacation.is_active %}
                                    <a href="{{ url_for('set_active', vacation_id=item.vacation.id) }}" class="btn btn-small btn-primary">Set Active</a>
                                {% endif %}
                                
                                <form method="POST" action="{{ url_for('delete', vacation_id=item.vacation.id) }}" 
                                      style="display: inline;" 
                                      onsubmit="return confirm('Are you sure you want to delete this vacation?');">
                                    <button type="submit" class="btn btn-small btn-danger">Delete</button>
                                </form>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="empty-state">
                    <h2>No Vacations Yet</h2>
                    <p>Start planning your dream vacation!</p>
                    <a href="{{ url_for('add') }}" class="btn btn-primary">Add Your First Vacation</a>
                </div>
            {% endif %}
        </main>

        <footer>
            <p>All your adventures in one place! üó∫Ô∏è</p>
        </footer>
    </div>
</body>
</html>
